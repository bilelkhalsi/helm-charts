# Default values for spring-boot-istio.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
enabled: true
nameOverride: ""
fullnameOverride: ""
# Istio VirtualService specification : https://istio.io/latest/docs/reference/config/networking/virtual-service/
VirtualService:
  gateways:
  hosts:
    - org.cluster.local
  http:
  - name: "api-v1"
    match:
    - uri:
        prefix: "/api/v1"
    route:
    - destination:
        host: api.org.cluster.local
        subset: v1
  - name: "api-v2"
    route:
    - destination:
        host: api.org.cluster.local
        subset: v2
# Istio DestinationRule specification : https://istio.io/latest/docs/reference/config/networking/destination-rule/
DestinationRule:
  spec:
    host: api.org.cluster.local
    trafficPolicy:
      loadBalancer:
        simple: ROUND_ROBIN
    subsets:
    - name: v1
      labels:
        version: v1
    - name: v2
      labels:
        version: v2
